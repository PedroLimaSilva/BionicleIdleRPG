import { CombatantTemplate, EnemyEncounter, MaskPower } from '../types/Combat';
import { ElementTribe, Mask } from '../types/Matoran';

export const MASK_POWERS: Partial<Record<Mask, MaskPower>> = {
  [Mask.Akaku]: {
    shortName: Mask.Akaku,
    longName: 'Mask of X-Ray Vision',
    description: 'Marks target; halves their effective defense for 2 rounds',
    target: 'enemy',
    cooldown: { amount: 4, unit: 'turn' },
    effect: {
      duration: { amount: 2, unit: 'round' },
      type: 'DEFENSE',
      multiplier: 0.5,
    },
  },
  [Mask.Hau]: {
    shortName: Mask.Hau,
    longName: 'Mask of Shielding',
    description: 'Grants full immunity to all damage for 1 round',
    target: 'self',
    cooldown: {
      amount: 1,
      unit: 'wave',
    },
    effect: {
      duration: {
        amount: 1,
        unit: 'round',
      },
      type: 'DMG_MITIGATOR',
      multiplier: 0,
    },
  },
  [Mask.Kaukau]: {
    shortName: Mask.Kaukau,
    longName: 'Mask of Water Breathing',
    description: 'Heals self each turn for 3 turns',
    target: 'self',
    cooldown: {
      amount: 1,
      unit: 'wave',
    },
    effect: {
      duration: {
        amount: 3,
        unit: 'turn',
      },
      type: 'HEAL',
      multiplier: 0.2,
    },
  },
  [Mask.Huna]: {
    shortName: Mask.Huna,
    longName: 'Mask of Concealment',
    description: 'Becomes untargetable for 1 turn',
    target: 'self',
    cooldown: {
      amount: 3,
      unit: 'turn',
    },
    effect: {
      duration: {
        amount: 1,
        unit: 'turn',
      },
      type: 'AGGRO',
      multiplier: 0,
    },
  },
  [Mask.Kakama]: {
    shortName: Mask.Kakama,
    longName: 'Mask of Speed',
    description: 'User attacks twice this round',
    target: 'self',
    cooldown: {
      amount: 5,
      unit: 'turn',
    },
    effect: {
      duration: {
        amount: 1,
        unit: 'round',
      },
      type: 'SPEED',
      multiplier: 2,
    },
  },
  [Mask.Pakari]: {
    shortName: Mask.Pakari,
    longName: 'Mask of Strength',
    description: 'Next attack deals 3x damage',
    target: 'self',
    cooldown: {
      amount: 2,
      unit: 'turn',
    },
    effect: {
      duration: {
        amount: 1,
        unit: 'attack',
      },
      type: 'ATK_MULT',
      multiplier: 3,
    },
  },
  [Mask.Miru]: {
    shortName: Mask.Miru,
    longName: 'Mask of Levitation',
    description: 'Evades next 2 attacks; unaffected by ground-based effects',
    target: 'self',
    cooldown: {
      amount: 1,
      unit: 'wave',
    },
    effect: {
      duration: {
        amount: 2,
        unit: 'hit',
      },
      type: 'DMG_MITIGATOR',
      multiplier: 0,
    },
  },
  [Mask.Ruru]: {
    shortName: Mask.Ruru,
    longName: 'Mask of Night Vision',
    description: 'Blinds all enemies, reducing hit chance for 2 turns',
    target: 'allEnemies',
    cooldown: {
      amount: 4,
      unit: 'turn',
    },
    effect: {
      duration: {
        amount: 2,
        unit: 'turn',
      },
      type: 'ACCURACY_MULT',
      multiplier: 0.5,
    },
  },
  [Mask.Komau]: {
    shortName: Mask.Komau,
    longName: 'Mask of Mind Control',
    description: 'Forces one enemy to attack their own team for 3 turns',
    target: 'enemy',
    cooldown: { amount: 4, unit: 'turn' },
    effect: {
      duration: { amount: 3, unit: 'turn' },
      type: 'CONFUSION',
    },
  },
  [Mask.Rau]: {
    shortName: Mask.Rau,
    longName: 'Mask of Translation',
    description: `Changes the user's Element so the all attacks are super effective on any enemy. Lasts until the end of the current wave.`,
    target: 'self',
    cooldown: {
      amount: 2,
      unit: 'wave',
    },
    effect: {
      duration: {
        amount: 1,
        unit: 'wave',
      },
      type: 'ATK_MULT',
      multiplier: 1.5,
    },
  },
  [Mask.Matatu]: {
    shortName: Mask.Matatu,
    longName: 'Mask of Telekinesis',
    description: 'Immobilizes enemy, preventing them from attacking for 1 wave',
    target: 'enemy',
    cooldown: {
      amount: 2,
      unit: 'turn',
    },
    effect: {
      duration: {
        amount: 1,
        unit: 'wave',
      },
      type: 'ATK_MULT',
      multiplier: 0,
    },
  },
  [Mask.Mahiki]: {
    shortName: Mask.Mahiki,
    longName: 'Mask of Illusion',
    description: 'Summons a clone to absorb 1 hit',
    target: 'self',
    cooldown: {
      amount: 2,
      unit: 'turn',
    },
    effect: {
      duration: {
        amount: 1,
        unit: 'hit',
      },
      type: 'DMG_MITIGATOR',
      multiplier: 0,
    },
  },

  // Nuva masks - team-wide effects
  [Mask.HauNuva]: {
    shortName: Mask.HauNuva,
    longName: 'Great Nuva Mask of Shielding',
    description: 'Shields the whole team from damage for 1 round',
    target: 'team',
    cooldown: { amount: 2, unit: 'wave' },
    effect: {
      duration: { amount: 1, unit: 'round' },
      type: 'DMG_MITIGATOR',
      multiplier: 0,
    },
  },
  [Mask.KaukauNuva]: {
    shortName: Mask.KaukauNuva,
    longName: 'Great Nuva Mask of Water Breathing',
    description: 'Heals the whole team each turn for 2 turns',
    target: 'team',
    cooldown: { amount: 2, unit: 'wave' },
    effect: {
      duration: { amount: 2, unit: 'turn' },
      type: 'HEAL',
      multiplier: 0.15,
    },
  },
  [Mask.KakamaNuva]: {
    shortName: Mask.KakamaNuva,
    longName: 'Great Nuva Mask of Speed',
    description: 'All allies attack twice this round',
    target: 'team',
    cooldown: { amount: 3, unit: 'wave' },
    effect: {
      duration: { amount: 1, unit: 'round' },
      type: 'SPEED',
      multiplier: 2,
    },
  },
  [Mask.AkakuNuva]: {
    shortName: Mask.AkakuNuva,
    longName: 'Great Nuva Mask of X-Ray Vision',
    description: 'All allies deal +30% damage for 2 rounds',
    target: 'team',
    cooldown: { amount: 3, unit: 'turn' },
    effect: {
      duration: { amount: 2, unit: 'round' },
      type: 'ATK_MULT',
      multiplier: 1.3,
    },
  },
  [Mask.PakariNuva]: {
    shortName: Mask.PakariNuva,
    longName: 'Great Nuva Mask of Strength',
    description: 'All allies deal 2x damage on their next attack',
    target: 'team',
    cooldown: { amount: 3, unit: 'turn' },
    effect: {
      duration: { amount: 1, unit: 'attack' },
      type: 'ATK_MULT',
      multiplier: 2,
    },
  },
  [Mask.MiruNuva]: {
    shortName: Mask.MiruNuva,
    longName: 'Great Nuva Mask of Levitation',
    description: 'The whole team evades the next hit',
    target: 'team',
    cooldown: { amount: 2, unit: 'wave' },
    effect: {
      duration: { amount: 1, unit: 'hit' },
      type: 'DMG_MITIGATOR',
      multiplier: 0,
    },
  },
  [Mask.Vahi]: {
    shortName: Mask.Vahi,
    longName: 'Mask of Time',
    description:
      'The legendary Vahi. Turaga Vakama entrusted it to Tahu for use only in the direst emergency. No combat effect.',
    target: 'self',
    cooldown: { amount: 999, unit: 'wave' },
    effect: {
      duration: { amount: 1, unit: 'turn' },
      type: 'HEAL',
      multiplier: 0,
    },
  },
};

export const COMBATANT_DEX: Record<string, CombatantTemplate> = {
  Toa_Kopaka: {
    id: 'Toa_Kopaka',
    name: 'Toa Kopaka',
    model: 'Toa_Kopaka',
    mask: Mask.Akaku,
    element: ElementTribe.Ice,
    baseHp: 90,
    baseAttack: 16,
    baseDefense: 14,
    baseSpeed: 8,
  },
  Toa_Pohatu: {
    id: 'Toa_Pohatu',
    name: 'Toa Pohatu',
    model: 'Toa_Pohatu',
    mask: Mask.Kakama,
    element: ElementTribe.Stone,
    baseHp: 100,
    baseAttack: 20,
    baseDefense: 12,
    baseSpeed: 6,
  },
  Toa_Tahu: {
    id: 'Toa_Tahu',
    name: 'Toa Tahu',
    model: 'Toa_Tahu',
    mask: Mask.Hau,
    element: ElementTribe.Fire,
    baseHp: 90,
    baseAttack: 18,
    baseDefense: 10,
    baseSpeed: 9,
  },
  Toa_Onua: {
    id: 'Toa_Onua',
    name: 'Toa Onua',
    model: 'Toa_Onua',
    mask: Mask.Pakari,
    element: ElementTribe.Earth,
    baseHp: 110,
    baseAttack: 15,
    baseDefense: 16,
    baseSpeed: 5,
  },
  Toa_Gali: {
    id: 'Toa_Gali',
    name: 'Toa Gali',
    model: 'Toa_Gali',
    mask: Mask.Kaukau,
    element: ElementTribe.Water,
    baseHp: 95,
    baseAttack: 14,
    baseDefense: 14,
    baseSpeed: 7,
  },
  Toa_Lewa: {
    id: 'Toa_Lewa',
    name: 'Toa Lewa',
    model: 'Toa_Lewa',
    mask: Mask.Miru,
    element: ElementTribe.Air,
    baseHp: 85,
    baseAttack: 17,
    baseDefense: 10,
    baseSpeed: 11,
  },

  // Toa Nuva - Upgraded forms; stats diminished when nuvaSymbolsSequestered
  Toa_Tahu_Nuva: {
    id: 'Toa_Tahu_Nuva',
    name: 'Toa Tahu Nuva',
    model: 'Toa_Tahu_Nuva',
    mask: Mask.Hau,
    element: ElementTribe.Fire,
    baseHp: 100,
    baseAttack: 22,
    baseDefense: 12,
    baseSpeed: 11,
  },
  Toa_Gali_Nuva: {
    id: 'Toa_Gali_Nuva',
    name: 'Toa Gali Nuva',
    model: 'Toa_Gali_Nuva',
    mask: Mask.Kaukau,
    element: ElementTribe.Water,
    baseHp: 108,
    baseAttack: 18,
    baseDefense: 16,
    baseSpeed: 9,
  },
  Toa_Pohatu_Nuva: {
    id: 'Toa_Pohatu_Nuva',
    name: 'Toa Pohatu Nuva',
    model: 'Toa_Pohatu_Nuva',
    mask: Mask.Kakama,
    element: ElementTribe.Stone,
    baseHp: 112,
    baseAttack: 24,
    baseDefense: 14,
    baseSpeed: 8,
  },
  Toa_Onua_Nuva: {
    id: 'Toa_Onua_Nuva',
    name: 'Toa Onua Nuva',
    model: 'Toa_Onua_Nuva',
    mask: Mask.Pakari,
    element: ElementTribe.Earth,
    baseHp: 122,
    baseAttack: 18,
    baseDefense: 20,
    baseSpeed: 7,
  },
  Toa_Kopaka_Nuva: {
    id: 'Toa_Kopaka_Nuva',
    name: 'Toa Kopaka Nuva',
    model: 'Toa_Kopaka_Nuva',
    mask: Mask.Akaku,
    element: ElementTribe.Ice,
    baseHp: 102,
    baseAttack: 20,
    baseDefense: 16,
    baseSpeed: 10,
  },
  Toa_Lewa_Nuva: {
    id: 'Toa_Lewa_Nuva',
    name: 'Toa Lewa Nuva',
    model: 'Toa_Lewa_Nuva',
    mask: Mask.Miru,
    element: ElementTribe.Air,
    baseHp: 98,
    baseAttack: 21,
    baseDefense: 12,
    baseSpeed: 14,
  },

  // Bohrok - Differentiated by swarm behavior
  tahnok: {
    id: 'tahnok',
    name: 'Tahnok',
    model: 'bohrok',
    element: ElementTribe.Fire,
    baseHp: 80,
    baseAttack: 22,
    baseDefense: 10,
    baseSpeed: 8,
  },
  gahlok: {
    id: 'gahlok',
    name: 'Gahlok',
    model: 'bohrok',
    element: ElementTribe.Water,
    baseHp: 75,
    baseAttack: 18,
    baseDefense: 12,
    baseSpeed: 10,
  },
  lehvak: {
    id: 'lehvak',
    name: 'Lehvak',
    model: 'bohrok',
    element: ElementTribe.Air,
    baseHp: 70,
    baseAttack: 16,
    baseDefense: 9,
    baseSpeed: 12,
  },
  pahrak: {
    id: 'pahrak',
    name: 'Pahrak',
    model: 'bohrok',
    element: ElementTribe.Stone,
    baseHp: 95,
    baseAttack: 20,
    baseDefense: 14,
    baseSpeed: 6,
  },
  nuhvok: {
    id: 'nuhvok',
    name: 'Nuhvok',
    model: 'bohrok',
    element: ElementTribe.Earth,
    baseHp: 90,
    baseAttack: 17,
    baseDefense: 15,
    baseSpeed: 5,
  },
  kohrak: {
    id: 'kohrak',
    name: 'Kohrak',
    model: 'bohrok',
    element: ElementTribe.Ice,
    baseHp: 85,
    baseAttack: 19,
    baseDefense: 11,
    baseSpeed: 9,
  },

  // Bohrok Kal - Elite variants with non-elemental abilities; elevated stats
  // Tahnok-Kal: Electricity | Gahlok-Kal: Magnetism | Lehvak-Kal: Vacuum
  // Pahrak-Kal: Plasma | Nuhvok-Kal: Gravity | Kohrak-Kal: Sonics
  tahnok_kal: {
    id: 'tahnok_kal',
    name: 'Tahnok Kal',
    model: 'bohrok',
    element: ElementTribe.Fire,
    baseHp: 140,
    baseAttack: 38,
    baseDefense: 18,
    baseSpeed: 14,
  },
  gahlok_kal: {
    id: 'gahlok_kal',
    name: 'Gahlok Kal',
    model: 'bohrok',
    element: ElementTribe.Water,
    baseHp: 130,
    baseAttack: 32,
    baseDefense: 22,
    baseSpeed: 16,
  },
  lehvak_kal: {
    id: 'lehvak_kal',
    name: 'Lehvak Kal',
    model: 'bohrok',
    element: ElementTribe.Air,
    baseHp: 120,
    baseAttack: 30,
    baseDefense: 16,
    baseSpeed: 20,
  },
  pahrak_kal: {
    id: 'pahrak_kal',
    name: 'Pahrak Kal',
    model: 'bohrok',
    element: ElementTribe.Stone,
    baseHp: 165,
    baseAttack: 36,
    baseDefense: 26,
    baseSpeed: 12,
  },
  nuhvok_kal: {
    id: 'nuhvok_kal',
    name: 'Nuhvok Kal',
    model: 'bohrok',
    element: ElementTribe.Earth,
    baseHp: 155,
    baseAttack: 32,
    baseDefense: 28,
    baseSpeed: 10,
  },
  kohrak_kal: {
    id: 'kohrak_kal',
    name: 'Kohrak Kal',
    model: 'bohrok',
    element: ElementTribe.Ice,
    baseHp: 150,
    baseAttack: 34,
    baseDefense: 20,
    baseSpeed: 15,
  },
  // Headliners for multi-Kal encounters (avatar uses Tahnok Kal)
  bohrok_kal_pair: {
    id: 'bohrok_kal_pair',
    name: 'Bohrok Kal',
    model: 'bohrok',
    element: ElementTribe.Fire,
    baseHp: 140,
    baseAttack: 38,
    baseDefense: 18,
    baseSpeed: 14,
  },
  bohrok_kal_trio: {
    id: 'bohrok_kal_trio',
    name: 'Bohrok Kal',
    model: 'bohrok',
    element: ElementTribe.Fire,
    baseHp: 140,
    baseAttack: 38,
    baseDefense: 18,
    baseSpeed: 14,
  },
};

/** Krana drop ids by color: blue=Fire, orange=Water, red=Air, green=Stone, lime=Earth, white=Ice */
const KRANA_BY_COLOR = {
  blue: [
    'krana-xa-blue',
    'krana-bo-blue',
    'krana-su-blue',
    'krana-za-blue',
    'krana-vu-blue',
    'krana-ja-blue',
    'krana-yo-blue',
    'krana-ca-blue',
  ],
  orange: [
    'krana-xa-orange',
    'krana-bo-orange',
    'krana-su-orange',
    'krana-za-orange',
    'krana-vu-orange',
    'krana-ja-orange',
    'krana-yo-orange',
    'krana-ca-orange',
  ],
  red: [
    'krana-xa-red',
    'krana-bo-red',
    'krana-su-red',
    'krana-za-red',
    'krana-vu-red',
    'krana-ja-red',
    'krana-yo-red',
    'krana-ca-red',
  ],
  green: [
    'krana-xa-green',
    'krana-bo-green',
    'krana-su-green',
    'krana-za-green',
    'krana-vu-green',
    'krana-ja-green',
    'krana-yo-green',
    'krana-ca-green',
  ],
  lime: [
    'krana-xa-lime',
    'krana-bo-lime',
    'krana-su-lime',
    'krana-za-lime',
    'krana-vu-lime',
    'krana-ja-lime',
    'krana-yo-lime',
    'krana-ca-lime',
  ],
  white: [
    'krana-xa-white',
    'krana-bo-white',
    'krana-su-white',
    'krana-za-white',
    'krana-vu-white',
    'krana-ja-white',
    'krana-yo-white',
    'krana-ca-white',
  ],
} as const;

function makeLoot(
  color: keyof typeof KRANA_BY_COLOR,
  indices: [number, number],
  chance = 0.15
): { id: string; chance: number }[] {
  return indices.map((i) => ({ id: KRANA_BY_COLOR[color][i], chance }));
}

function makeBohrokWave(
  bohrokId: string,
  lvl: number,
  count: number
): { id: string; lvl: number }[] {
  return Array.from({ length: count }, () => ({ id: bohrokId, lvl }));
}

export const ENCOUNTERS: EnemyEncounter[] = [
  // Tahnok (Fire / blue) - 4 tiers
  {
    id: 'tahnok-1',
    name: 'Tahnok Swarm',
    headliner: 'tahnok',
    difficulty: 1,
    description: 'An aggressive swarm of fire-spewing Bohrok.',
    waves: [[...makeBohrokWave('tahnok', 20, 3)], [...makeBohrokWave('tahnok', 20, 2)]],
    loot: makeLoot('blue', [0, 1]),
  },
  {
    id: 'tahnok-2',
    name: 'Tahnok Swarm II',
    headliner: 'tahnok',
    difficulty: 2,
    description: 'Hardened fire Bohrok with greater numbers.',
    waves: [
      [...makeBohrokWave('tahnok', 25, 3)],
      [...makeBohrokWave('nuhvok', 25, 1), ...makeBohrokWave('tahnok', 25, 2)],
    ],
    loot: [...makeLoot('blue', [2, 3]), ...makeLoot('lime', [2, 3])],
  },
  {
    id: 'tahnok-3',
    name: 'Tahnok Swarm III',
    headliner: 'tahnok',
    difficulty: 3,
    description: 'Elite fire Bohrok in coordinated waves.',
    waves: [
      [...makeBohrokWave('tahnok', 30, 3)],
      [...makeBohrokWave('lehvak', 30, 1), ...makeBohrokWave('tahnok', 30, 2)],
      [...makeBohrokWave('tahnok', 30, 1)],
    ],
    loot: [...makeLoot('blue', [4, 5]), ...makeLoot('red', [4, 5])],
  },
  {
    id: 'tahnok-4',
    name: 'Tahnok Swarm IV',
    headliner: 'tahnok',
    difficulty: 4,
    description: 'The fiercest fire swarms on Mata Nui.',
    waves: [
      [...makeBohrokWave('tahnok', 35, 3)],
      [...makeBohrokWave('tahnok', 35, 3)],
      [...makeBohrokWave('nuhvok', 35, 2), ...makeBohrokWave('tahnok', 35, 1)],
      [...makeBohrokWave('tahnok', 35, 1)],
    ],
    loot: [...makeLoot('blue', [6, 7]), ...makeLoot('lime', [6, 7])],
  },
  // Gahlok (Water / orange) - 4 tiers
  {
    id: 'gahlok-1',
    name: 'Gahlok Swarm',
    headliner: 'gahlok',
    difficulty: 1,
    description: 'Swift and evasive water attackers.',
    waves: [[...makeBohrokWave('gahlok', 20, 2)], [...makeBohrokWave('gahlok', 20, 3)]],
    loot: makeLoot('orange', [0, 1]),
  },
  {
    id: 'gahlok-2',
    name: 'Gahlok Swarm II',
    headliner: 'gahlok',
    difficulty: 2,
    description: 'Stronger water Bohrok with corrosive tactics.',
    waves: [
      [...makeBohrokWave('gahlok', 25, 3)],
      [...makeBohrokWave('lehvak', 25, 1), ...makeBohrokWave('gahlok', 25, 2)],
      [...makeBohrokWave('gahlok', 25, 1)],
    ],
    loot: [...makeLoot('orange', [2, 3]), ...makeLoot('red', [2, 3])],
  },
  {
    id: 'gahlok-3',
    name: 'Gahlok Swarm III',
    headliner: 'gahlok',
    difficulty: 3,
    description: 'Elite water swarms that strike in unison.',
    waves: [
      [...makeBohrokWave('gahlok', 30, 3)],
      [...makeBohrokWave('kohrak', 30, 1), ...makeBohrokWave('gahlok', 30, 2)],
      [...makeBohrokWave('gahlok', 30, 3)],
      [...makeBohrokWave('gahlok', 30, 1)],
    ],
    loot: [...makeLoot('orange', [4, 5]), ...makeLoot('white', [4, 5])],
  },
  {
    id: 'gahlok-4',
    name: 'Gahlok Swarm IV',
    headliner: 'gahlok',
    difficulty: 4,
    description: 'The most dangerous water swarms.',
    waves: [
      [...makeBohrokWave('gahlok', 35, 3)],
      [...makeBohrokWave('kohrak', 35, 2), ...makeBohrokWave('gahlok', 35, 1)],
      [...makeBohrokWave('lehvak', 35, 1), ...makeBohrokWave('gahlok', 35, 2)],
      [...makeBohrokWave('gahlok', 35, 2)],
    ],
    loot: [...makeLoot('orange', [6, 7]), ...makeLoot('white', [6, 7]), ...makeLoot('red', [6, 7])],
  },
  // Lehvak (Air / red) - 4 tiers
  {
    id: 'lehvak-1',
    name: 'Lehvak Swarm',
    headliner: 'lehvak',
    difficulty: 1,
    description: 'Swift and evasive air attackers.',
    waves: [[...makeBohrokWave('lehvak', 20, 2)], [...makeBohrokWave('lehvak', 20, 2)]],
    loot: makeLoot('red', [0, 1]),
  },
  {
    id: 'lehvak-2',
    name: 'Lehvak Swarm II',
    headliner: 'lehvak',
    difficulty: 2,
    description: 'Hardened air Bohrok with acid spray.',
    waves: [
      [...makeBohrokWave('lehvak', 25, 3)],
      [...makeBohrokWave('pahrak', 25, 1), ...makeBohrokWave('lehvak', 25, 2)],
    ],
    loot: [...makeLoot('red', [2, 3]), ...makeLoot('green', [2, 3])],
  },
  {
    id: 'lehvak-3',
    name: 'Lehvak Swarm III',
    headliner: 'lehvak',
    difficulty: 3,
    description: 'Elite air swarms with relentless strikes.',
    waves: [
      [...makeBohrokWave('lehvak', 30, 3)],
      [...makeBohrokWave('gahlok', 30, 1), ...makeBohrokWave('lehvak', 30, 2)],
      [...makeBohrokWave('lehvak', 30, 1)],
    ],
    loot: [...makeLoot('red', [4, 5]), ...makeLoot('orange', [4, 5])],
  },
  {
    id: 'lehvak-4',
    name: 'Lehvak Swarm IV',
    headliner: 'lehvak',
    difficulty: 4,
    description: 'The fiercest air swarms on Mata Nui.',
    waves: [
      [...makeBohrokWave('lehvak', 35, 3)],
      [...makeBohrokWave('tahnok', 35, 1), ...makeBohrokWave('lehvak', 35, 2)],
      [...makeBohrokWave('lehvak', 35, 3)],
      [...makeBohrokWave('lehvak', 35, 1)],
    ],
    loot: [...makeLoot('red', [6, 7]), ...makeLoot('blue', [6, 7])],
  },
  // Pahrak (Stone / green) - 4 tiers
  {
    id: 'pahrak-1',
    name: 'Pahrak Swarm',
    headliner: 'pahrak',
    difficulty: 1,
    description: 'Stone Bohrok that absorb and reflect damage.',
    waves: [[...makeBohrokWave('pahrak', 20, 2)], [...makeBohrokWave('pahrak', 20, 2)]],
    loot: makeLoot('green', [0, 1]),
  },
  {
    id: 'pahrak-2',
    name: 'Pahrak Swarm II',
    headliner: 'pahrak',
    difficulty: 2,
    description: 'Hardened stone Bohrok with greater resilience.',
    waves: [
      [...makeBohrokWave('pahrak', 25, 3)],
      [...makeBohrokWave('nuhvok', 25, 1), ...makeBohrokWave('pahrak', 25, 2)],
    ],
    loot: [...makeLoot('green', [2, 3]), ...makeLoot('lime', [2, 3])],
  },
  {
    id: 'pahrak-3',
    name: 'Pahrak Swarm III',
    headliner: 'pahrak',
    difficulty: 3,
    description: 'Elite stone swarms in coordinated formation.',
    waves: [
      [...makeBohrokWave('pahrak', 30, 3)],
      [...makeBohrokWave('kohrak', 30, 1), ...makeBohrokWave('pahrak', 30, 2)],
      [...makeBohrokWave('pahrak', 30, 1)],
    ],
    loot: [...makeLoot('green', [4, 5]), ...makeLoot('white', [4, 5])],
  },
  {
    id: 'pahrak-4',
    name: 'Pahrak Swarm IV',
    headliner: 'pahrak',
    difficulty: 4,
    description: 'The most resilient stone swarms.',
    waves: [
      [...makeBohrokWave('pahrak', 35, 3)],
      [...makeBohrokWave('lehvak', 35, 1), ...makeBohrokWave('pahrak', 35, 2)],
      [...makeBohrokWave('pahrak', 35, 3)],
      [...makeBohrokWave('pahrak', 35, 1)],
    ],
    loot: [...makeLoot('green', [6, 7]), ...makeLoot('red', [6, 7])],
  },
  // Nuhvok (Earth / lime) - 4 tiers
  {
    id: 'nuhvok-1',
    name: 'Nuhvok Swarm',
    headliner: 'nuhvok',
    difficulty: 1,
    description: 'Earth Bohrok that strike from below.',
    waves: [[...makeBohrokWave('nuhvok', 20, 2)], [...makeBohrokWave('nuhvok', 20, 2)]],
    loot: makeLoot('lime', [0, 1]),
  },
  {
    id: 'nuhvok-2',
    name: 'Nuhvok Swarm II',
    headliner: 'nuhvok',
    difficulty: 2,
    description: 'Hardened earth Bohrok with burrowing tactics.',
    waves: [
      [...makeBohrokWave('nuhvok', 25, 3)],
      [...makeBohrokWave('tahnok', 25, 1), ...makeBohrokWave('nuhvok', 25, 2)],
    ],
    loot: [...makeLoot('lime', [2, 3]), ...makeLoot('blue', [2, 3])],
  },
  {
    id: 'nuhvok-3',
    name: 'Nuhvok Swarm III',
    headliner: 'nuhvok',
    difficulty: 3,
    description: 'Elite earth swarms with devastating strikes.',
    waves: [
      [...makeBohrokWave('nuhvok', 30, 3)],
      [...makeBohrokWave('pahrak', 30, 1), ...makeBohrokWave('nuhvok', 30, 2)],
      [...makeBohrokWave('nuhvok', 30, 1)],
    ],
    loot: [...makeLoot('lime', [4, 5]), ...makeLoot('green', [4, 5])],
  },
  {
    id: 'nuhvok-4',
    name: 'Nuhvok Swarm IV',
    headliner: 'nuhvok',
    difficulty: 4,
    description: 'The fiercest earth swarms on Mata Nui.',
    waves: [
      [...makeBohrokWave('nuhvok', 35, 3)],
      [...makeBohrokWave('kohrak', 35, 1), ...makeBohrokWave('nuhvok', 35, 2)],
      [...makeBohrokWave('nuhvok', 35, 3)],
      [...makeBohrokWave('nuhvok', 35, 1)],
    ],
    loot: [...makeLoot('lime', [6, 7]), ...makeLoot('white', [6, 7])],
  },
  // Kohrak (Ice / white) - 4 tiers
  {
    id: 'kohrak-1',
    name: 'Kohrak Swarm',
    headliner: 'kohrak',
    difficulty: 1,
    description: 'Ice Bohrok that freeze and slow.',
    waves: [[...makeBohrokWave('kohrak', 20, 2)], [...makeBohrokWave('kohrak', 20, 2)]],
    loot: makeLoot('white', [0, 1]),
  },
  {
    id: 'kohrak-2',
    name: 'Kohrak Swarm II',
    headliner: 'kohrak',
    difficulty: 2,
    description: 'Hardened ice Bohrok with chilling power.',
    waves: [
      [...makeBohrokWave('kohrak', 25, 3)],
      [...makeBohrokWave('gahlok', 25, 1), ...makeBohrokWave('kohrak', 25, 2)],
    ],
    loot: [...makeLoot('white', [2, 3]), ...makeLoot('orange', [2, 3])],
  },
  {
    id: 'kohrak-3',
    name: 'Kohrak Swarm III',
    headliner: 'kohrak',
    difficulty: 3,
    description: 'Elite ice swarms in frost formation.',
    waves: [
      [...makeBohrokWave('kohrak', 30, 3)],
      [...makeBohrokWave('lehvak', 30, 1), ...makeBohrokWave('kohrak', 30, 2)],
      [...makeBohrokWave('kohrak', 30, 1)],
    ],
    loot: [...makeLoot('white', [4, 5]), ...makeLoot('red', [4, 5])],
  },
  {
    id: 'kohrak-4',
    name: 'Kohrak Swarm IV',
    headliner: 'kohrak',
    difficulty: 4,
    description: 'The most frigid ice swarms on Mata Nui.',
    waves: [
      [...makeBohrokWave('kohrak', 35, 3)],
      [...makeBohrokWave('tahnok', 35, 1), ...makeBohrokWave('kohrak', 35, 2)],
      [...makeBohrokWave('kohrak', 35, 3)],
      [...makeBohrokWave('kohrak', 35, 1)],
    ],
    loot: [...makeLoot('white', [6, 7]), ...makeLoot('blue', [6, 7])],
  },

  // Bohrok Kal - Elite encounters; each Kal is unique. Unwinnable until final.
  // 1, 2, or 3 Kal per encounter; multi-Kal waves use different types.
  {
    id: 'tahnok_kal-1',
    name: 'Tahnok Kal',
    headliner: 'tahnok_kal',
    difficulty: 5,
    description: 'Bohrok-Kal of Electricity, empowered by stolen Nuva symbols.',
    waves: [[...makeBohrokWave('tahnok_kal', 45, 1)]],
    loot: [],
    unlockedAfter: ['bohrok_kal_stolen_symbols'],
  },
  {
    id: 'gahlok_kal-1',
    name: 'Gahlok Kal',
    headliner: 'gahlok_kal',
    difficulty: 5,
    description: 'Bohrok-Kal of Magnetism, wielding stolen Nuva symbols.',
    waves: [[...makeBohrokWave('gahlok_kal', 45, 1)]],
    loot: [],
    unlockedAfter: ['bohrok_kal_stolen_symbols'],
  },
  {
    id: 'lehvak_kal-1',
    name: 'Lehvak Kal',
    headliner: 'lehvak_kal',
    difficulty: 5,
    description: 'Bohrok-Kal of Vacuum, empowered by stolen Nuva symbols.',
    waves: [[...makeBohrokWave('lehvak_kal', 45, 1)]],
    loot: [],
    unlockedAfter: ['bohrok_kal_stolen_symbols'],
  },
  {
    id: 'pahrak_kal-1',
    name: 'Pahrak Kal',
    headliner: 'pahrak_kal',
    difficulty: 5,
    description: 'Bohrok-Kal of Plasma, empowered by stolen Nuva symbols.',
    waves: [[...makeBohrokWave('pahrak_kal', 45, 1)]],
    loot: [],
    unlockedAfter: ['bohrok_kal_stolen_symbols'],
  },
  {
    id: 'nuhvok_kal-1',
    name: 'Nuhvok Kal',
    headliner: 'nuhvok_kal',
    difficulty: 5,
    description: 'Bohrok-Kal of Gravity, empowered by stolen Nuva symbols.',
    waves: [[...makeBohrokWave('nuhvok_kal', 45, 1)]],
    loot: [],
    unlockedAfter: ['bohrok_kal_stolen_symbols'],
  },
  {
    id: 'kohrak_kal-1',
    name: 'Kohrak Kal',
    headliner: 'kohrak_kal',
    difficulty: 5,
    description: 'Bohrok-Kal of Sonics, empowered by stolen Nuva symbols.',
    waves: [[...makeBohrokWave('kohrak_kal', 45, 1)]],
    loot: [],
    unlockedAfter: ['bohrok_kal_stolen_symbols'],
  },
  {
    id: 'bohrok_kal_pair_1',
    name: 'Tahnok Kal & Gahlok Kal',
    headliner: 'bohrok_kal_pair',
    difficulty: 5,
    description: 'Bohrok-Kal of Electricity and Magnetism attack together.',
    waves: [[...makeBohrokWave('tahnok_kal', 45, 1), ...makeBohrokWave('gahlok_kal', 45, 1)]],
    loot: [],
    unlockedAfter: ['bohrok_kal_stolen_symbols'],
  },
  {
    id: 'bohrok_kal_pair_2',
    name: 'Lehvak Kal & Pahrak Kal',
    headliner: 'bohrok_kal_pair',
    difficulty: 5,
    description: 'Bohrok-Kal of Vacuum and Plasma in a coordinated assault.',
    waves: [[...makeBohrokWave('lehvak_kal', 45, 1), ...makeBohrokWave('pahrak_kal', 45, 1)]],
    loot: [],
    unlockedAfter: ['bohrok_kal_stolen_symbols'],
  },
  {
    id: 'bohrok_kal_trio',
    name: 'Nuhvok Kal, Kohrak Kal & Tahnok Kal',
    headliner: 'bohrok_kal_trio',
    difficulty: 5,
    description: 'Three Bohrok Kal converge—Gravity, Sonics, and Electricity.',
    waves: [
      [
        ...makeBohrokWave('nuhvok_kal', 45, 1),
        ...makeBohrokWave('kohrak_kal', 45, 1),
        ...makeBohrokWave('tahnok_kal', 45, 1),
      ],
    ],
    loot: [],
    unlockedAfter: ['bohrok_kal_stolen_symbols'],
  },
  {
    id: 'bohrok_kal_final',
    name: 'The Final Confrontation',
    headliner: 'tahnok_kal',
    difficulty: 6,
    description:
      'All six Bohrok Kal united—Electricity, Magnetism, Vacuum, Plasma, Gravity, and Sonics. The Toa must stand together to reclaim the Nuva symbols.',
    waves: [
      [
        ...makeBohrokWave('tahnok_kal', 32, 1),
        ...makeBohrokWave('gahlok_kal', 32, 1),
        ...makeBohrokWave('lehvak_kal', 32, 1),
      ],
      [
        ...makeBohrokWave('pahrak_kal', 32, 1),
        ...makeBohrokWave('nuhvok_kal', 32, 1),
        ...makeBohrokWave('kohrak_kal', 32, 1),
      ],
    ],
    loot: [],
    unlockedAfter: ['bohrok_kal_race_to_nest'],
  },
];
